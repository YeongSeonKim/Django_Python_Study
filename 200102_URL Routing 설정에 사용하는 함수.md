#### 2020-01-02

# URL Routing 설정에 사용하는 함수

## 1. include(), path()

### 1.1 include()

`프로젝트이름/urls.py`에서 `애플리케이션이름/urls.py`에 있는 urls.py와 연결해주기 위해서 필요한 함수이다.

사용하기 위해서는 `from django.urls import include` 코드를 입력해 줘야한다.

### 1.2 path()

사용하기 위해서는 `from django.urls import path` 코드를 입력해 줘야한다.

URL경로 상에서 `<컨버터:전달할키워드인자명>`과 같은 꺽쇠괄호가 들어 있는 URL을 인식하여 뷰 함수에 키워드 인자로 전달해준다.

- 컨버터의 종류
  - `str` : 경로 구분자를 제외한 비어 있지 않은 문자열
  - `path` : 경로 구분자를 포함한 비어 있지 않은 문자열
  - `int` : 0 또는 임의의 양의 정수와 일치
  - `slug` : 문자 또는 숫자와 하이픈 및 밑줄 문자로 구성된 슬러그 문자열과 일치. 예를 들어, I-STUDY-DJANGO

### 1.3 예제코드

```python
from django.urls import path,include

urlpatterns = [
    ...
    path('애플리케이션이름/', include('애플리케이션이름.urls')),
    path('', views.view에서 지정해준 함수명, name='지정할 이름'),
]
```

`path('애플리케이션이름/', include('애플리케이션이름.urls')),` 코드는 `애플리케이션이름/`까지 `프로젝트이름/urls.py` 파일에서 해석을하고 `include('애플리케이션이름.urls')`함수를 통해서 `애플리케이션`디렉토리 아래있는 urls.py 파일을 해석할 수 있게 해준다. 

### + 나는 위의 내용은 알고 있지만 아래의 re_path()를 사용하여 정규표현식을 쓰는 방식은 처음봐서 공부를 해볼거다!! 

## 2. re_path()

django 2.0 이전에서 사용하던 url 함수와 동일한 함수이다.

사용하기 위해서는 `from django.urls import re_path` 코드를 입력해 줘야한다.

`정규표현식` : 띄어쓰기 하나에도 민감하니까 주의하자!!!

### 2.1 정규표현식 기호

정규표현식을 포함한 url 패턴을 지정한다.

`regex(regular expression, 정규표현식)`

: 문자열 검색이나 치환 등을 간편하게 처리할 수 있으며 대부분의 개발 언어에서 지원

- `r'`: 뒤에 오는 문자열은 regex로 인식

- `^` : 정규표현식 시작 기호

- `$` : 정규표현식 종료 기호

- `\d` : 숫자

- `\D` : 숫자가 아님을 의미

  - [^0-9]와 동일

- `\w` : 밑줄 문자를 포함한 영숫자 문자에 일치. `[A-Za-z0-9_]` 와 동일

- `\W` : 비 단어 문자에 일치합니다. `[^A-Za-z0-9_]` 와 동일

- `[xyz]` : 문자 셋

  - 이 패턴 타입은 괄호 안의 이스케이프 시퀀스를 포함한 어떤 한 문자에 일치
  - 이 안에서는 점(.) 이나 별표 (*) 같은 문자가 특별한 효과를 발휘하지 못함
  - 하이픈(-)을 이용한 범위 지정
  - 예시)
    - `[ᄀ-힣]` : 한글 한 글자
    - `[1-9]` : 숫자 1에서 9까지 한 글자
    - `[012]` : 0 또는 1 또는 2 한 글자
    - `[acd]` : a 또는 c 또는 d 한 글자
    - `[a-zA-Z]` : 알파벳 대소문자 한글자

- `[^xyz]` : 괄호안에 포함되지 않는 문자

- `{n}` : 앞문자가 n번 나타나면 일치

  - 예시)
    - `\d{5}` : 숫자 5번 나타나면 일치
    - `010[1-9]\d{7}` : 휴대폰 번호

- `{min, max}` : min과 max는 양의 정수

  - min < max
  - 앞의 문자가 최소 min개, 최대 max개
  - max가 생략될 시 무한으로 취급
  - 예시)
    - `\d{1,5}` : 숫자가 최소 1개에서 최대 5개
    - `[ᄀ-힣]{1,3}` : 한글 최소 1글자에서 최대 3글

- `*` : 0회 이상 연속으로 반복되는 앞선 문자에 일치

  ​	   `{0,}` 와 동일

- `+` : 1회 이상 연속으로 반복되는 앞선 문자에 일치

  ​	   `{1,}` 와 동일합니다.

- `?` : 0 또는 1회 반복되는 앞선 문자에 일치

  ​	   `{0,1}`와 동일합니다.

- `.` : (소수점) 다음 줄 문자(개행 문자)를 제외한 어떤 하나의 문자에 일치

### 2.2 주요 정규표현식

- 정수 : `\d+`
- 이메일 : `[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}`
- 휴대폰 : `010[1-9]\d{7}`
- 전화번호: `\d{3}-\d{3,4}-\d{4}`

### 2.3 예제코드

```python
from django.urls import re_path

urlpatterns = [
    # path('admin/', admin.site.urls),
    re_path(r'^admin/', admin.site.urls),
    # bookmark_숙제 부분
    re_path(r'^bookmark/(?P<bookmark_pk>\d+)/$', views.BookmarkDetail, name='detail'),
]
```

여기서 path() 대신 re_path()를 사용하는 이유는 re_path()는 정규식을 사용할 수 있어 좀 더 복잡한 url들을 호출할 수 있기 때문이다.

### 2.4 인자를 view에 넘겨주기

#### 2.4.1 키워드 인자로 넘겨주기

인자를 작성하는 형식 :  `(?P<파라미터명>정규식패턴)`

위의 예제코드 설명

-  `(?P<bookmark_pk>\d+)`

  - `(?P)` : 이 부분의 문자열에 또다른 정규표현식을 사용할 것인데

  - `\d+` : '1개 이상의 숫자' 의 정규식 패턴과 일치한다면
  - bookmark_pk라는 이름으로 해당 문자열을 저장할 것을 의미